@model Danime.Models.AnimeData.Root

<!-- Search Form -->
<form method="get" action="@Url.Action("Search", "Anime")" class="search-form">
    <input type="text" name="search" placeholder="Search Anime" required />
    <button type="submit">Search</button>
</form>

@if (Model != null && Model.data.Any())
{
    <div class="anime-list">
        @foreach (var anime in Model.data)
        {
            <div class="anime-item">
                
                @if (anime.images?.jpg?.image_url != null)
                {
                    <img src="@anime.images.jpg.image_url" alt="@anime.title" class="anime-image" />
                }
                else
                {
                    <p>No image available</p>
                }

                
                <h3>@anime.title</h3>


                <a href="@Url.Action("Details", "Anime", new { search = anime.title })" class="view-more-btn">
                    View More Details
                </a>


                <form asp-controller="Favorites" asp-action="AddToFavorites" method="post">
                    <input type="hidden" name="animeId" value="@anime.mal_id" />
                    <input type="hidden" name="title" value="@anime.title" />
                    <input type="hidden" name="imageUrl" value="@anime.images.jpg.image_url" />
                    <input type="hidden" name="type" value="Anime" />
                    <button type="submit" class="favorite-btn">❤️</button>
                </form>
            </div>
        }
        }
    </div>
}
else
{
    <p class="no-results"></p>
}
